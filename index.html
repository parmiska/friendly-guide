<!DOCTYPE html>
<html>
<head>
  <title>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</title>
  <meta charset="UTF-8" />
</head>
<body>
  <h1>–ó–∞–ª–∏—à –∫–æ–º–µ–Ω—Ç–∞—Ä:</h1>
  <input id="author" placeholder="–¢–≤–æ—î —ñ–º'—è" />
  <br /><br />
  <textarea id="commentText" placeholder="–¢–µ–∫—Å—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—è"></textarea>
  <br />
  <button onclick="addComment()">–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</button>

  <h2>–í—Å—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ:</h2>
  <ul id="commentsList"></ul>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <script>
    // üîß –°–Æ–î–ò –í–°–¢–ê–í –°–í–û–á –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø FIREBASE
  const firebaseConfig = {
  apiKey: "AIzaSyDic5s4o8BZ8w1MGN0bTuA7QZFpU1l8094",
  authDomain: "simple-word-app.firebaseapp.com",
  databaseURL: "https://simple-word-app-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "simple-word-app",
  storageBucket: "simple-word-app.firebasestorage.app",
  messagingSenderId: "1029854852560",
  appId: "1:1029854852560:web:e21bce1721681e8c52f5d5"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const commentsRef = db.ref('comments');

    function addComment() {
      const author = document.getElementById('author').value.trim();
      const text = document.getElementById('commentText').value.trim();
      if (!author || !text) {
        alert("–í–≤–µ–¥–∏ —ñ–º'—è —ñ —Ç–µ–∫—Å—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—è");
        return;
      }
      const newCommentRef = commentsRef.push();
      newCommentRef.set({
        author,
        text,
        timestamp: Date.now()
      });
      document.getElementById('author').value = '';
      document.getElementById('commentText').value = '';
    }

    commentsRef.on('value', (snapshot) => {
      const commentsList = document.getElementById('commentsList');
      commentsList.innerHTML = '';
      const comments = snapshot.val();
      if (!comments) {
        commentsList.innerHTML = '<li>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î.</li>';
        return;
      }
      // –°–æ—Ä—Ç—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑–∞ —á–∞—Å–æ–º (–≤—ñ–¥ —Å—Ç–∞—Ä–∏—Ö –¥–æ –Ω–æ–≤–∏—Ö)
      const sortedComments = Object.entries(comments).sort((a, b) => a[1].timestamp - b[1].timestamp);
      for (const [key, comment] of sortedComments) {
        const li = document.createElement('li');
        li.textContent = `${comment.author}: ${comment.text}`;
        commentsList.appendChild(li);
      }
    });
  </script>
</body>
</html>
